// CSS Custom Properties for button components
:root {
    // Base button properties
    --button-font-family: inherit;
    --button-font-weight: 600;
    --button-line-height: 1.5;
    --button-border-width: 1px;
    --button-border-radius: 99rem;
    --button-cursor: pointer;
    --button-transition: all 0.15s ease-in-out;

    // Focus ring for accessibility
    --button-focus-ring-width: 3px;
    --button-focus-ring-offset: 2px;

    // Sizing (padding values)
    --button-padding-sm-x: 0.1rem;
    --button-padding-sm-y: 0.5rem;
    --button-padding-md-x: 1.25rem;
    --button-padding-md-y: 0.75rem;
    --button-padding-lg-x: 1.75rem;
    --button-padding-lg-y: 1rem;

    // Font sizes
    --button-font-size-sm: 0.875rem;
    --button-font-size-md: 1rem;
    --button-font-size-lg: 1.125rem;

    // Min heights for consistent touch targets
    --button-min-height-sm: 2rem;
    --button-min-height-md: 2.5rem;
    --button-min-height-lg: 3rem;

    // Colors - Light theme
    // Primary (Black)
    --button-primary-bg: #000000;
    --button-primary-bg-hover: #000000;
    --button-primary-bg-active: #000000;
    --button-primary-bg-disabled: #000000;
    --button-primary-text: #ffffff;
    --button-primary-text-disabled: #ffffff;
    --button-primary-border: transparent;
    --button-primary-focus-ring: rgba(37, 99, 235, 0.4);

    // Secondary (Gray)
    --button-secondary-bg: #4b5563;
    --button-secondary-bg-hover: #374151;
    --button-secondary-bg-active: #1f2937;
    --button-secondary-bg-disabled: #d1d5db;
    --button-secondary-text: #ffffff;
    --button-secondary-text-disabled: #9ca3af;
    --button-secondary-border: transparent;
    --button-secondary-focus-ring: rgba(75, 85, 99, 0.4);

    // Success (Green)
    --button-success-bg: #059669;
    --button-success-bg-hover: #047857;
    --button-success-bg-active: #065f46;
    --button-success-bg-disabled: #a7f3d0;
    --button-success-text: #ffffff;
    --button-success-text-disabled: #059669;
    --button-success-border: transparent;
    --button-success-focus-ring: rgba(5, 150, 105, 0.4);

    // Danger (Red)
    --button-danger-bg: #dc2626;
    --button-danger-bg-hover: #b91c1c;
    --button-danger-bg-active: #991b1b;
    --button-danger-bg-disabled: #fca5a5;
    --button-danger-text: #ffffff;
    --button-danger-text-disabled: #dc2626;
    --button-danger-border: transparent;
    --button-danger-focus-ring: rgba(220, 38, 38, 0.4);

    // Warning (Yellow/Orange)
    --button-warning-bg: #d97706;
    --button-warning-bg-hover: #b45309;
    --button-warning-bg-active: #92400e;
    --button-warning-bg-disabled: #fed7aa;
    --button-warning-text: #ffffff;
    --button-warning-text-disabled: #d97706;
    --button-warning-border: transparent;
    --button-warning-focus-ring: rgba(217, 119, 6, 0.4);

    // Outline variants
    --button-outline-bg: transparent;
    --button-outline-bg-hover: #f9fafb;
    --button-outline-bg-active: #f3f4f6;
    --button-outline-bg-disabled: transparent;
    --button-outline-text: #374151;
    --button-outline-text-disabled: #d1d5db;
    --button-outline-border: #d1d5db;
    --button-outline-border-hover: #9ca3af;
    --button-outline-border-disabled: #e5e7eb;
    --button-outline-focus-ring: rgba(55, 65, 81, 0.4);
}

// Dark theme support
@media (prefers-color-scheme: dark) {
    :root {
        // Adjust colors for dark theme
        --button-secondary-bg: #6b7280;
        --button-secondary-bg-hover: #9ca3af;
        --button-secondary-bg-active: #d1d5db;
        --button-secondary-text: #1f2937;

        --button-outline-bg-hover: #374151;
        --button-outline-bg-active: #4b5563;
        --button-outline-text: #f9fafb;
        --button-outline-text-disabled: #6b7280;
        --button-outline-border: #6b7280;
        --button-outline-border-hover: #9ca3af;
        --button-outline-border-disabled: #4b5563;
    }
}

// Base button styles
%button-base {
    // Reset default button styles
    appearance: none;
    background: none;
    border: none;
    margin: 0;
    padding: 0;

    // Typography
    font-family: var(--button-font-family);
    font-weight: var(--button-font-weight);
    line-height: var(--button-line-height);
    text-align: center;
    text-decoration: none;
    white-space: nowrap;

    // Layout
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;

    // Interaction
    cursor: var(--button-cursor);
    user-select: none;

    // Appearance
    border: var(--button-border-width) solid transparent;
    border-radius: var(--button-border-radius);
    transition: var(--button-transition);

    // Accessibility - keyboard focus
    &:focus {
        outline: none;
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-primary-focus-ring);
    }

    // Disabled state
    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        cursor: not-allowed;
        pointer-events: none;
        opacity: 0.65;
    }

    // Loading state
    &.loading {
        cursor: wait;
        position: relative;
        color: transparent !important;

        &::after {
            content: '';
            position: absolute;
            width: 1rem;
            height: 1rem;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: button-spin 1s linear infinite;
            color: inherit;
        }
    }

    // Icon support
    .icon {
        flex-shrink: 0;

        &:first-child:not(:last-child) {
            margin-right: 0.5rem;
        }

        &:last-child:not(:first-child) {
            margin-left: 0.5rem;
        }

        &:only-child {
            margin: 0;
        }
    }
}

// Button sizes
%button-size-sm {
    padding: var(--button-padding-sm-y) var(--button-padding-sm-x);
    font-size: var(--button-font-size-sm);
    min-height: var(--button-min-height-sm);
}

%button-size-md {
    padding: var(--button-padding-md-y) var(--button-padding-md-x);
    font-size: var(--button-font-size-md);
    min-height: var(--button-min-height-md);
}

%button-size-lg {
    padding: var(--button-padding-lg-y) var(--button-padding-lg-x);
    font-size: var(--button-font-size-lg);
    min-height: var(--button-min-height-lg);
}

// Primary button (default)
.btn,
.btn-primary,
button:not([class*='btn-']):not(.link) {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-primary-bg);
    color: var(--button-primary-text);
    border-color: var(--button-primary-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-primary-bg-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-primary-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-primary-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-primary-bg-disabled);
        color: var(--button-primary-text-disabled);
    }
}

// Secondary button
.btn-secondary {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-secondary-bg);
    color: var(--button-secondary-text);
    border-color: var(--button-secondary-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-secondary-bg-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-secondary-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-secondary-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-secondary-bg-disabled);
        color: var(--button-secondary-text-disabled);
    }
}

// Success button
.btn-success {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-success-bg);
    color: var(--button-success-text);
    border-color: var(--button-success-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-success-bg-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-success-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-success-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-success-bg-disabled);
        color: var(--button-success-text-disabled);
    }
}

// Danger button
.btn-danger {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-danger-bg);
    color: var(--button-danger-text);
    border-color: var(--button-danger-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-danger-bg-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-danger-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-danger-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-danger-bg-disabled);
        color: var(--button-danger-text-disabled);
    }
}

// Warning button
.btn-warning {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-warning-bg);
    color: var(--button-warning-text);
    border-color: var(--button-warning-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-warning-bg-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-warning-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-warning-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-warning-bg-disabled);
        color: var(--button-warning-text-disabled);
    }
}

// Outline button
.btn-outline {
    @extend %button-base;
    @extend %button-size-md;

    background-color: var(--button-outline-bg);
    color: var(--button-outline-text);
    border-color: var(--button-outline-border);

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-outline-bg-hover);
        border-color: var(--button-outline-border-hover);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-outline-bg-active);
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-outline-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        background-color: var(--button-outline-bg-disabled);
        color: var(--button-outline-text-disabled);
        border-color: var(--button-outline-border-disabled);
    }
}

// Size modifiers
.btn-sm {
    @extend %button-size-sm;
}

.btn-lg {
    @extend %button-size-lg;
}

// Width modifiers
.btn-block {
    display: flex;
    width: 100%;
}

// Icon-only buttons (square buttons)
.btn-icon {
    padding: var(--button-padding-md-y);
    min-width: var(--button-min-height-md);

    &.btn-sm {
        padding: var(--button-padding-sm-y);
        min-width: var(--button-min-height-sm);
    }

    &.btn-lg {
        padding: var(--button-padding-lg-y);
        min-width: var(--button-min-height-lg);
    }
}

// Ghost/text button (minimal styling)
.btn-ghost {
    @extend %button-base;
    @extend %button-size-md;

    background-color: transparent;
    color: var(--button-outline-text);
    border: none;

    &:hover:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-outline-bg-hover);
    }

    &:active:not(:disabled):not([aria-disabled='true']):not(.disabled) {
        background-color: var(--button-outline-bg-active);
    }

    &:focus {
        box-shadow: 0 0 0 var(--button-focus-ring-width) var(--button-outline-focus-ring);
    }

    &:disabled,
    &[aria-disabled='true'],
    &.disabled {
        color: var(--button-outline-text-disabled);
    }
}

// Button groups
.btn-group {
    display: inline-flex;
    vertical-align: middle;

    .btn {
        position: relative;
        flex: 1 1 auto;

        &:not(:first-child) {
            margin-left: -1px;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        &:not(:last-child) {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        &:hover,
        &:focus,
        &:active {
            z-index: 1;
        }
    }
}

// Loading animation
@keyframes button-spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

// High contrast mode support (accessibility)
@media (prefers-contrast: high) {
    :root {
        --button-focus-ring-width: 4px;
        --button-border-width: 2px;
    }

    .btn,
    .btn-primary,
    .btn-secondary,
    .btn-success,
    .btn-danger,
    .btn-warning {
        border: var(--button-border-width) solid currentColor;
    }
}

// Reduced motion support (accessibility)
@media (prefers-reduced-motion: reduce) {
    %button-base,
    .btn,
    .btn-primary,
    .btn-secondary,
    .btn-success,
    .btn-danger,
    .btn-warning,
    .btn-outline,
    .btn-ghost {
        transition: none;

        &:hover,
        &:active {
            transform: none;
        }

        &.loading::after {
            animation: none;
        }
    }
}

// Print styles
@media print {
    .btn,
    .btn-primary,
    .btn-secondary,
    .btn-success,
    .btn-danger,
    .btn-warning,
    .btn-outline,
    .btn-ghost {
        color: #000 !important;
        background: #fff !important;
        border: 1px solid #000 !important;
        box-shadow: none !important;
        text-decoration: none !important;
    }
}
